define(["underscore","backbone","localstorage","model/todo"],function(e,t,n,r){"use strict";var o=t.Collection.extend({model:r,localStorage:new n("todos-backbone"),done:function(){return this.where({done:!0})},remaining:function(){return this.where({done:!1})},nextOrder:function(){return this.length?this.last().get("order")+1:1},search:function(e){var t=e.toLowerCase(),n=this.filter(function(e){return e.get("title").toLowerCase().indexOf(t)>=0||e.get("content").toLowerCase().indexOf(t)>=0});return new o(n)},comparator:function(e){return-e.get("create_time")}});return new o});